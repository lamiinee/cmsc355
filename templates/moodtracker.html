{% extends "base.html" %}

{% block title %}Mood Tracker | AI Therapist{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8 mx-auto">
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-primary text-white">
                <h3 class="mb-0"><i class="bi bi-emoji-smile"></i> Mood Tracker</h3>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="mb-3">
                        <label for="mood" class="form-label">How are you feeling today?</label>
                        <select class="form-select" id="mood" name="mood" required>
                            <option value="" selected disabled>Select your mood</option>
                            <option value="Happy">üòä Happy</option>
                            <option value="Sad">üò¢ Sad</option>
                            <option value="Angry">üò† Angry</option>
                            <option value="Anxious">üò∞ Anxious</option>
                            <option value="Stressed">üò´ Stressed</option>
                            <option value="Calm">üòå Calm</option>
                            <option value="Excited">ü§© Excited</option>
                            <option value="Tired">üò¥ Tired</option>
                            <option value="Neutral">üòê Neutral</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label for="intensity" class="form-label">Intensity (1-10)</label>
                        <input type="range" class="form-range" min="1" max="10" id="intensity" name="intensity" value="5">
                        <div class="d-flex justify-content-between">
                            <small>1 (Low)</small>
                            <small>5 (Medium)</small>
                            <small>10 (High)</small>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="description" class="form-label">Notes (optional)</label>
                        <textarea class="form-control" id="description" name="description" rows="3" placeholder="What's contributing to this mood?"></textarea>
                    </div>
                    
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="bi bi-save"></i> Record Mood
                    </button>
                </form>
            </div>
        </div>
        
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h3 class="mb-0"><i class="bi bi-calendar-heart"></i> Mood History</h3>
            </div>
            <div class="card-body">
                {% if mood_history %}
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Mood</th>
                                    <th>Intensity</th>
                                    <th>Notes</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for mood in mood_history %}
                                    <tr>
                                        <td>{{ mood[3] }}</td>
                                        <td>
                                            {% if mood[0] == 'Happy' %}üòä
                                            {% elif mood[0] == 'Sad' %}üò¢
                                            {% elif mood[0] == 'Angry' %}üò†
                                            {% elif mood[0] == 'Anxious' %}üò∞
                                            {% elif mood[0] == 'Stressed' %}üò´
                                            {% elif mood[0] == 'Calm' %}üòå
                                            {% elif mood[0] == 'Excited' %}ü§©
                                            {% elif mood[0] == 'Tired' %}üò¥
                                            {% else %}üòê{% endif %}
                                            {{ mood[0] }}
                                        </td>
                                        <td>
                                            <div class="progress">
                                                <div class="progress-bar.bg-success" 
                                                     role="progressbar" style="width:  mood2*10" 
                                                     aria-valuenow="{{ mood[2] }}" aria-valuemin="1" aria-valuemax="10">
                                                    {{ mood[2] }}
                                                </div>
                                            </div>
                                        </td>
                                        <td>{{ mood[1] or '-' }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% else %}
                    <div class="text-center py-4 text-muted">
                        <i class="bi bi-emoji-frown display-4"></i>
                        <p class="mt-3">No mood entries yet. Record your first mood above!</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}